window._fitAnalytics=function(){var d=window._fitAnalytics.shop={prefix:"dafitibr-",interval:{},products:{},isMobile:/iphone|android|iemobile|blackberry/i.test(window.navigator&&window.navigator.userAgent)&&(!("mozInnerScreenX"in window)||"onorientationchange"in window)&&"ontouchstart"in window,isMultiPage:null!==document.body.querySelector(".look-products"),funnels:{sizeChart:"fitanalytics_false",sizeAdvisor:"fitanalytics_true"}};d.isABTestEnabled=function(){return Boolean(window._fitAnalyticsABTestFunnel)},d.getABTestFunnel=function(){return window._fitAnalyticsABTestFunnel},d.sendEvent=function(t,e){if("function"==typeof window.ga)switch(t){case"open":ga("ga_dafiti.send",{hitType:"event",eventCategory:"A/B Test",eventAction:"click_open_Fitanalytics|Dafiti",eventLabel:e,nonInteraction:1});break;case"sizechart":ga("ga_dafiti.send",{hitType:"event",eventCategory:"A/B Test",eventAction:"click_size_chart|Dafiti",eventLabel:e,nonInteraction:1})}},d.el={sizes:[".selectbox-options li .selectbox-option-name","#add-to-cart .add-to-cart-select [data-stock-message]"].join(", "),addToCart:'#add-to-cart button[type="submit"], .btn-look-buy',thumbnail:d.isMobile?".slide-wrapper.active img":"#gallery .gallery-preview img",sizeChart:"#stock-available .stock-available-sizeguide-title",sizeAdvisor:"#fitanalytics-size-advisor",buttonAnchor:d.isMultiPage?".add-to-cart-form-sizes":d.isMobile?"#add-to-cart":"#add-to-cart .add-to-cart-form-sizes",productContainer:"body",productWrappers:".container.product-page, .look-products > .lookbook-product"};function i(t){return!(!t||!d.$)&&("function"==typeof(t=!(t instanceof d.$)?d.$(t):t).prop&&"OPTION"===t.prop("tagName")?t.parent().val(t.val()).change():(d.isMobile&&"function"==typeof t.tap||"function"==typeof t.click)&&t.click(),t)}function c(t){return"string"!=typeof t?"":t.replace(/^["'\s\uFEFF\xA0]+|[\s\uFEFF\xA0"']+$/g,"")}d.getLanguage=function(){var t=document.documentElement;return c(t.getAttribute("lang")).substring(0,2).toLowerCase()},d.getShopCountry=function(){return"BR"},d.getProductId=function(t){var e;return d.isMultiPage?(e=this.$(t.$el).find(".lookbook-product-selection").find("input").val())&&this.prefix+e:(e=(e=document.querySelector("#add-to-cart [name='p']"))&&e.getAttribute("value"))&&this.prefix+e},d.find=function(t){return this.$product||(this.$product=this.$(d.el.productContainer)),this.$product.find(this.el[t])},d.getThumbnail=function(t){if(d.isMultiPage){e=this.$(t.$el).find(".lookbook-product-image-column img");return c(e.attr("data-src")||e.attr("src"))}var e=this.find("thumbnail").first();return c(e.attr("data-src")||e.attr("src"))},d.getUserId=function(){return window.customer_id||window.userid||null},d.getAvailableSizes=function(t){var e=[];e.dic={},e.state={};for(var i=this.$(t.$el).find(this.el.sizes),n=0,o=i.length;n<o;++n){var a=i[n],r=c(a.textContent||a.innerText||"").replace(/\s\(Esgotado\)/i,""),s=!d.$(a).hasClass("is-sold-out")&&"disabled"!==d.$(a).attr("disabled");r&&!e.dic[r]&&(e.state[r]=s)&&(e.dic[r]=a,e.push(r))}return e},d.selectAvailableSize=function(t,e){var i=this.getAvailableSizes(t).dic[e];return i?(d.sizeAdvisor.setText(t,e,!0),i):(d.sizeAdvisor.setText(t,e,!1),!1)},d.getUserId=function(){return window.customer_id},d.sizeAdvisor={text:{de:"Finde meine Grösse",en:"Find my size",es:"Encontrar mi talla",it:"Trova la mia taglia",nl:"Vind mijn maat",pt:"Descobrir Meu Tamanho",fi:"Minun kokoni",fr:"Ma taille",ru:"Мой размер",se:"Min storlek",tr:"BEDENİMİ BUL"},recommendationText:{de:"Ihre Größe ist",en:"Your size is",fr:"Votre taille est",es:"Tu talla es",it:"La tua taglia è",pt:"O seu tamanho é",ru:"Ваш размер",tr:"Sizin bedeniniz:",nl:"Jouw maat is",fi:"Sinun kokosi on"},find:function(t){var e=t.getAnchor().parent().find(".fitanalytics__button");return e.attr("data-fitanalytics-id")!==t.id?d.$():e},remove:function(t){return this.find(t).remove()},getText:function(t){var e=d.getLanguage();return t.buttonText||this.text[e]||"Find my size"},setText:function(t,e,i){var n=d.getLanguage();return t.buttonText=i?(this.recommendationText[n]||"Your size is")+" "+e:this.text[n]||"Find my size",this.find(t).find(".fitanalytics__button-recommendation").html(t.buttonText),this},getMarkup:function(t){var e=this.getText(t),i={cursor:"pointer",width:"114px",height:"22px","vertical-align":"middle"},n={cursor:"normal",display:"block"};d.isMultiPage&&!d.isMobile?(n.margin="0px",i.width="90px",i.height="18px",i["margin-top"]="-18px"):d.isMultiPage&&d.isMobile?(n.margin="10px 0",i.width="90px",i.height="18px",i["margin-top"]="-18px"):d.isMobile?i.margin="10px 0px":n.margin="-10px 0px 10px 0px";i=d.$("<a></a>").attr({id:"fitanalytics-size-advisor",class:"fitanalytics__button","data-fitanalytics-id":t.id}).css(n).append(d.$("<img>").attr({alt:this.getText(t),src:"//integrations.fitanalytics.com/assets/button/fit-finder-pdp.svg",onmouseover:"this.style.opacity=0.8;return false;",onmouseleave:"this.style.opacity=1;return false;"}).css(i));return d.isMultiPage||i.append(d.$("<span></span>").attr({onmouseover:'this.style.textDecoration="none";return false;',onmouseleave:'this.style.textDecoration="underline";return false;',class:"fitanalytics__button-recommendation"}).css({display:"inline-block","font-size":"13px","margin-left":"10px","text-decoration":"underline",cursor:"pointer",color:"#4A4A4A","vertical-align":"middle"}).text(e)).append("<span> &rsaquo;</span>").css({"font-size":"13px","text-decoration":"none"}),i},install:function(t,e){var i,n=this.find(t);return n.length||(e&&e.hideSizeChart&&d.find("sizeChart").hide(),n=this.getMarkup(t,e).on("click",this.listener(t)),d.isMobile?(i=d.$("<div></div>").attr("class","col-xs-12").css({padding:"5px auto"}),e=d.$('#add-to-cart button[type="submit"]').closest("div"),i.append(n),e.before(i)):t.getAnchor().after(n)),n},listener:function(e){return function(){d.isABTestEnabled()&&d.sendEvent("open",d.getProductId());var t=d.getProductId();return d.widget.meterClick("size advisor",{garmentId:t}),d.widget.open({manufacturedSizes:d.getAvailableSizes(e).state,thumb:d.getThumbnail(e),productId:e.id}),!1}}},d.createWidget=function(){d.widget=new window.FitAnalyticsWidget({language:d.getLanguage(),shopCountry:d.getShopCountry(),userId:d.getUserId(),recommend:function(t,e,i){i&&e&&"new user"!==e&&!i.outOfStock&&!i.outOfScale&&d.isABTestEnabled()&&d.sendEvent("recommendation",d.getProductId());t=d.products[t];return d.selectAvailableSize(t,e)},cart:function(t,e){return!!i(d.widget.options.recommend(t,e))&&i(d.find("addToCart"))},close:function(t,e,i){return d.widget.options.recommend(t,e,i)}}),!d.widgetOptions&&d.widget.options&&(d.widgetOptions={cart:d.widget.options.cart,close:d.widget.options.close,recommend:d.widget.options.recommend})},d.onProductLoaded=function(t){if(!t.isSupported)return d.sizeAdvisor.remove(t),void d.find("sizeChart").show();d.isABTestEnabled()?d.ABTest.install(t):d.sizeAdvisor.find(t).length||(d.isMultiPage||d.widget.getRecommendation({thumb:d.getThumbnail(t),manufacturedSizes:d.getAvailableSizes(t).state,productId:t.id}),d.sizeAdvisor.install(t,{hideSizeChart:!0}))},d.onPageLoad=function(){if(d.find("sizeChart").off("click.fitA").on("click.fitA",function(){var t=d.getProductId();d.widget.meterClick("sizeChart",{garmentId:t}),d.sendEvent("sizechart",d.getProductId())}),d.isMultiPage)d.products&&d.$.each(d.products,function(t,e){d.onProductLoaded(e)});else if(n=d.products[d.getProductId()])return void d.onProductLoaded(n);for(var t=[],e=d.find("productWrappers"),i=0;i<e.length;i++){var n,o=d.getProductId({$el:e[i]});if(!o)return;if(n=d.products[o])return void d.onProductLoaded(n);n=d.products[o]={id:o,$el:e[i],getAnchor:function(){return d.$(this.$el).find(d.el.buttonAnchor)}},t.push(o)}t.length&&d.widget.requestProducts(t,function(t){if(t&&t.length){for(var e=0,i=t.length;e<i;++e){var n=t[e],o=n&&n.garment&&n.garment.serial;d.products[o]&&(d.products[o].isSupported=!0,d.products[o].data=n)}setTimeout(function(){d.onPageLoad()},250)}}),d.isMultiPage?d.widget.options.cart=null:d.widget.options.cart=d.widgetOptions.cart},d.ABTest={install:function(t){var e=d.getABTestFunnel();d.widget.meterExternalAB(e,{garmentId:t.id}),d.$(t.$el).find(".fitanalytics__button").length||e!==d.funnels.sizeAdvisor||(d.sizeAdvisor.install(t,{hideSizeChart:!0}),d.isMultiPage||d.widget.getRecommendation({thumb:d.getThumbnail(t),manufacturedSizes:d.getAvailableSizes(t).state,productId:t.id}))}},d.isLoaded=function(){return this.$=window.jQuery||window.$,Boolean("function"==typeof this.$&&!d.$(".add-to-cart-form-button.sold-out").is(":visible"))},d.interval.isLoaded=setInterval(function(){d.isLoaded()&&(clearInterval(d.interval.isLoaded),d.createWidget(),d.onPageLoad())},125)},function(){var t=document.createElement("script");t.setAttribute("src","//widget.fitanalytics.com/widget.js"),t.setAttribute("type","text/javascript"),document.body.appendChild(t)}();
//# sourceMappingURL=pdp.js.map